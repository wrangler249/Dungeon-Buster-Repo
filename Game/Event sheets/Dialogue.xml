<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Dialogue</name>
    <events>
        <variable comment="Can Buster talk now?" constant="0" name="busterCanTalk" static="0" type="number">0</variable>
        <variable comment="What step is it in the conversation?" constant="0" name="dialogueStep" static="0" type="number">0</variable>
        <variable constant="0" name="busterCanQuitConversation" static="0" type="number">0</variable>
        <comment>---</comment>
        <comment>Each NPC capable of dialogue must have a conversationID attached to it. This ID distinguishes each conversation and must be named descriptively, ie &quot;[Character Name][Character Name]_[Scene]&quot; would be something like &quot;BusterHarry_Argument1&quot;</comment>
        <comment>---</comment>
        <comment>The &quot;dialogueStep&quot; variable is used to signify what stage the converation is at. This is used when another character starts talking or a new sentence is started. Always remember to reset this variable back to 0 either at the end of a dialogue sequence or at the very beginning (ie this should be the first action carried out) whena new conversation is starting.</comment>
        <comment>---</comment>
        <comment>**This variable is handled by its own event schedule** The &quot;busterCanTalk&quot; variable is used as a boolean, with 0 being &quot;true&quot; and 1 being &quot;false&quot;. This is used as a cooldown after a conversation has finished, allowing the player to move away from the NPC without accidentally initiating the conversation again. This was implemented because of an infinite conversation problem where the player would press &apos;e&apos; at the end of a conversation and immediately trigger the same conversation again.</comment>
        <comment>---</comment>
        <comment>busterCanQuitConversation is used when the player reaches the end of the conversation. It is set in the last step of a conversation and is immediately reset to 0 in the following conversation end schedule.</comment>
        <comment>---</comment>
        <comment>Check the example below for an insight into how the conversation system should be used.</comment>
        <comment>---</comment>
        <comment>This first event checks at the start of each layout if the NPC has a key matching it&apos;s name in the WebStorage and if so, it sets that NPC&apos;s ConversationID to the one stored under that key.</comment>
        <comment>Check the actual dialogue events used for the game for an example of how this works.</comment>
        <event-block>
            <conditions>
                <condition id="-2" name="On start of layout" type="System" />
                <condition id="-11" name="For Each" type="System">
                    <param id="0" name="Object">NPCs</param>
                </condition>
                <condition id="4" name="Session key exists" type="WebStorage">
                    <param id="0" name="Key">NPCs.npcID</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Set value" type="NPCs">
                    <param id="0" name="Instance variable">ConversationID</param>
                    <param id="1" name="Value">Webstorage.SessionValue(NPCs.npcID)</param>
                </action>
            </actions>
        </event-block>
        <comment>Now we&apos;re creating all of the necessary dialogue objects at the start of each layout (since they aren&apos;t global) and immediately hiding them.</comment>
        <event-block>
            <conditions>
                <condition id="-2" name="On start of layout" type="System" />
            </conditions>
            <actions>
                <action id="-4" name="Set layer visible" type="System">
                    <param id="0" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="1" name="Visibility">0</param>
                </action>
                <action id="-3" name="Create object" type="System">
                    <param id="0" name="Object to create">DialoguePanel</param>
                    <param id="1" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="2" name="X">scrollx</param>
                    <param id="3" name="Y">scrolly</param>
                </action>
                <action id="-3" name="Create object" type="System">
                    <param id="0" name="Object to create">DialogueText</param>
                    <param id="1" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="2" name="X">scrollx</param>
                    <param id="3" name="Y">scrolly-6</param>
                </action>
                <action id="-3" name="Create object" type="System">
                    <param id="0" name="Object to create">Dialogue_OK</param>
                    <param id="1" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="2" name="X">scrollx</param>
                    <param id="3" name="Y">scrolly+40</param>
                </action>
                <action id="-3" name="Create object" type="System">
                    <param id="0" name="Object to create">SpeakerID</param>
                    <param id="1" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="2" name="X">scrollx-96</param>
                    <param id="3" name="Y">scrolly-70</param>
                </action>
                <action id="-3" name="Create object" type="System">
                    <param id="0" name="Object to create">Dialogue_Portrait</param>
                    <param id="1" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="2" name="X">scrollx-132</param>
                    <param id="3" name="Y">scrolly</param>
                </action>
            </actions>
        </event-block>
        <comment>Events carried out when Busters &apos;Talking&apos; boolean is true.</comment>
        <event-block>
            <conditions>
                <condition id="-8" name="Is boolean instance variable set" type="Buster">
                    <param id="0" name="Instance variable">Talking</param>
                </condition>
                <condition id="-4" name="Trigger once while true" type="System" />
            </conditions>
            <actions>
                <action id="-14" name="Set object time scale" type="System">
                    <param id="0" name="Object">Buster</param>
                    <param id="1" name="Time scale">0</param>
                </action>
                <action id="-4" name="Set layer visible" type="System">
                    <param id="0" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="1" name="Visibility">1</param>
                </action>
            </actions>
        </event-block>
        <comment>Events carried out when Busters &apos;Talking&apos; boolean is false.</comment>
        <event-block>
            <conditions>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" type="Buster">
                    <param id="0" name="Instance variable">Talking</param>
                </condition>
                <condition id="-4" name="Trigger once while true" type="System" />
            </conditions>
            <actions>
                <action id="-4" name="Set layer visible" type="System">
                    <param id="0" name="Layer">&quot;Dialogue&quot;</param>
                    <param id="1" name="Visibility">0</param>
                </action>
                <action id="-14" name="Set object time scale" type="System">
                    <param id="0" name="Object">Buster</param>
                    <param id="1" name="Time scale">1</param>
                </action>
                <action id="-9" name="Set value" type="System">
                    <param id="0" name="Variable">dialogueStep</param>
                    <param id="1" name="Value">0</param>
                </action>
                <action id="-9" name="Set value" type="System">
                    <param id="0" name="Variable">busterCanTalk</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action id="-16" name="Wait" type="System">
                    <param id="0" name="Seconds">2</param>
                </action>
                <action id="-9" name="Set value" type="System">
                    <param id="0" name="Variable">busterCanTalk</param>
                    <param id="1" name="Value">0</param>
                </action>
                <action id="-9" name="Set value" type="System">
                    <param id="0" name="Variable">busterCanQuitConversation</param>
                    <param id="1" name="Value">0</param>
                </action>
            </actions>
        </event-block>
        <event-block collapsed="1">
            <conditions>
                <condition id="0" name="On key pressed" type="Keyboard">
                    <param id="0" name="Key">69 (E)</param>
                </condition>
                <condition id="-14" name="Compare variable" type="System">
                    <param id="0" name="Variable">busterCanTalk</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-group collapsed="1" description="" title="Dialogue Example">
                    <sub-events>
                        <event-block>
                            <conditions>
                                <condition id="-11" name="For Each" type="System">
                                    <param id="0" name="Object">NPCs</param>
                                </condition>
                                <condition id="-8" name="Compare two values" type="System">
                                    <param id="0" name="First value">distance(buster.X,buster.Y,NPCs.x,NPCs.Y)</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Second value">32</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>Check the NPCs conversationID and then keep each step of the conversation as a subevent of this parent event.</comment>
                                <event-block collapsed="1">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" type="NPCs">
                                            <param id="0" name="Instance variable">ConversationID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;BusterMrTest_ExampleConversation1&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" type="Buster">
                                            <param id="0" name="Instance variable">Talking</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <comment>Each step should begin with the &apos;Dialogue_OK&apos; text being set invisible, then the sentence dialogue being set, then a wait period (1 second or more) before setting the dialogue step variable up 1. **Do NOT use the add function, always use the set function.** When the &apos;e&apos; key is pressed after this, the conversation dialogue will change to the next step.</comment>
                                        <event-block>
                                            <conditions>
                                                <condition id="-14" name="Compare variable" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="0" name="Set text" type="SpeakerID">
                                                    <param id="0" name="Text">&quot;Mr. Test&quot;</param>
                                                </action>
                                                <action id="0" name="Set text" type="DialogueText">
                                                    <param id="0" name="Text">&quot;The guy by the blue bed doesn&apos;t say much...&quot;</param>
                                                </action>
                                                <action id="-16" name="Wait" type="System">
                                                    <param id="0" name="Seconds">1.0</param>
                                                </action>
                                                <action id="-9" name="Set value" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block>
                                            <conditions>
                                                <condition id="-14" name="Compare variable" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">1</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="0" name="Set text" type="SpeakerID">
                                                    <param id="0" name="Text">&quot;Mr. Test&quot;</param>
                                                </action>
                                                <action id="0" name="Set text" type="DialogueText">
                                                    <param id="0" name="Text">tokenat(&quot;Oh, this sentence is randomised!|Here mate, this sentence is randomised.|Herp derp random sentence!&quot;, floor(random(3)),&quot;|&quot;)</param>
                                                </action>
                                                <action id="-16" name="Wait" type="System">
                                                    <param id="0" name="Seconds">1.0</param>
                                                </action>
                                                <action id="-9" name="Set value" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Value">2</param>
                                                </action>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>The final step of the conversation should NOT add one to the dialogueStep variable (it should also not reset the variable to 0 here). Instead, set the busterCanQuitConversation variable to 1.</comment>
                                        <event-block>
                                            <conditions>
                                                <condition id="-14" name="Compare variable" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">2</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="0" name="Set text" type="SpeakerID">
                                                    <param id="0" name="Text">&quot;Mr. Test&quot;</param>
                                                </action>
                                                <action id="0" name="Set text" type="DialogueText">
                                                    <param id="0" name="Text">&quot;Character count for a single dialogue step should not exceed 114 chars, otherwise the rest will be cut.&quot;</param>
                                                </action>
                                                <action id="-16" name="Wait" type="System">
                                                    <param id="0" name="Seconds">1.0</param>
                                                </action>
                                                <action id="-9" name="Set value" type="System">
                                                    <param id="0" name="Variable">busterCanQuitConversation</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block collapsed="1">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" type="NPCs">
                                            <param id="0" name="Instance variable">ConversationID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;BusterMrTest_ExampleConversation2&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" type="Buster">
                                            <param id="0" name="Instance variable">Talking</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <comment>Each step should begin with the &apos;Dialogue_OK&apos; text being set invisible, then the sentence dialogue being set, then a wait period (1 second or more) before setting the dialogue step variable up 1. **Do NOT use the add function, always use the set function.** When the &apos;e&apos; key is pressed after this, the conversation dialogue will change to the next step.</comment>
                                        <event-block>
                                            <conditions>
                                                <condition id="-14" name="Compare variable" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="0" name="Set text" type="SpeakerID">
                                                    <param id="0" name="Text">&quot;Mr. Test&quot;</param>
                                                </action>
                                                <action id="0" name="Set text" type="DialogueText">
                                                    <param id="0" name="Text">&quot;Eheh...&quot;</param>
                                                </action>
                                                <action id="-16" name="Wait" type="System">
                                                    <param id="0" name="Seconds">1.0</param>
                                                </action>
                                                <action id="-9" name="Set value" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block>
                                            <conditions>
                                                <condition id="-14" name="Compare variable" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">1</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="0" name="Set text" type="SpeakerID">
                                                    <param id="0" name="Text">&quot;Mr. Test&quot;</param>
                                                </action>
                                                <action id="0" name="Set text" type="DialogueText">
                                                    <param id="0" name="Text">&quot;I&apos;m the same NPC, but with a different ConversationID!&quot;</param>
                                                </action>
                                                <action id="-16" name="Wait" type="System">
                                                    <param id="0" name="Seconds">1.0</param>
                                                </action>
                                                <action id="-9" name="Set value" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Value">2</param>
                                                </action>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>The final step of the conversation should NOT add one to the dialogueStep variable (it should also not reset the variable to 0 here). Instead, set the busterCanQuitConversation variable to 1.</comment>
                                        <event-block>
                                            <conditions>
                                                <condition id="-14" name="Compare variable" type="System">
                                                    <param id="0" name="Variable">dialogueStep</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">2</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="0" name="Set text" type="SpeakerID">
                                                    <param id="0" name="Text">&quot;Mr. Test&quot;</param>
                                                </action>
                                                <action id="0" name="Set text" type="DialogueText">
                                                    <param id="0" name="Text">&quot;It&apos;s magic!&quot;</param>
                                                </action>
                                                <action id="-16" name="Wait" type="System">
                                                    <param id="0" name="Seconds">1.0</param>
                                                </action>
                                                <action id="-9" name="Set value" type="System">
                                                    <param id="0" name="Variable">busterCanQuitConversation</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action id="-15" name="Set visible" type="Dialogue_OK">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <comment>All conversations should be in a group and kept as a sub-event of this &quot;For Each NPCs&quot; event.</comment>
                <event-block>
                    <conditions>
                        <condition id="-11" name="For Each" type="System">
                            <param id="0" name="Object">NPCs</param>
                        </condition>
                        <condition id="-8" name="Compare two values" type="System">
                            <param id="0" name="First value">distance(buster.X,buster.Y,NPCs.x,NPCs.Y)</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Second value">32</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block>
                            <conditions>
                                <condition id="-7" name="Compare instance variable" type="NPCs">
                                    <param id="0" name="Instance variable">ConversationID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;BusterSquattersHoleGuard_Conversation1&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" type="Buster">
                                    <param id="0" name="Instance variable">Talking</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="4" name="Set animation" type="Dialogue_Portrait">
                                            <param id="0" name="Animation">&quot;Guard&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="0" name="Set text" type="SpeakerID">
                                            <param id="0" name="Text">&quot;Town Guard&quot;</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">&quot;BUSTER!&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">&quot;I&apos;m only going to tell you this once...&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Value">2</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>The final step of the conversation should NOT add one to the dialogueStep variable (it should also not reset the variable to 0 here). Instead, set the busterCanQuitConversation variable to 1.</comment>
                                <comment>Notice that here, the last two actions change the NPCs conversationID and creates a session key with the NPCs npcID and its new conversationID.</comment>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">2</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">&quot;Stay away from my wife, or I&apos;ll kill you.&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">busterCanQuitConversation</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                        <action id="-10" name="Set value" type="NPCs">
                                            <param id="0" name="Instance variable">ConversationID</param>
                                            <param id="1" name="Value">&quot;BusterSquattersHoleGuard_Conversation2&quot;</param>
                                        </action>
                                        <action id="1" name="Set session value" type="WebStorage">
                                            <param id="0" name="Key">&quot;SH_Guard2&quot;</param>
                                            <param id="1" name="Value">&quot;BusterSquattersHoleGuard_Conversation2&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block collapsed="1">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" type="NPCs">
                                    <param id="0" name="Instance variable">ConversationID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;BusterSquattersHoleGuard_Conversation2&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" type="Buster">
                                    <param id="0" name="Instance variable">Talking</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="4" name="Set animation" type="Dialogue_Portrait">
                                            <param id="0" name="Animation">&quot;Guard&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="0" name="Set text" type="SpeakerID">
                                            <param id="0" name="Text">&quot;Town Guard&quot;</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">choose(&quot;Piss off, Buster!&quot;,&quot;Go away, you cleft-assed cripple.&quot;)</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">busterCanQuitConversation</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block collapsed="1">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" type="NPCs">
                                    <param id="0" name="Instance variable">ConversationID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;BusterFriendlySkellie_Conversation01&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" type="Buster">
                                    <param id="0" name="Instance variable">Talking</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="4" name="Set animation" type="Dialogue_Portrait">
                                            <param id="0" name="Animation">&quot;Skeleton&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="0" name="Set text" type="SpeakerID">
                                            <param id="0" name="Text">&quot;???&quot;</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">&quot;Yeah, you could say I&apos;ve been here a while...&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">busterCanQuitConversation</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block collapsed="1">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" type="NPCs">
                                    <param id="0" name="Instance variable">ConversationID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;BusterPeach_Conversation01&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" type="Buster">
                                    <param id="0" name="Instance variable">Talking</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="4" name="Set animation" type="Dialogue_Portrait">
                                            <param id="0" name="Animation">&quot;Peach&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="0" name="Set text" type="SpeakerID">
                                            <param id="0" name="Text">&quot;Peach&quot;</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">&quot;Buy me more makeup!!!&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">busterCanQuitConversation</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block>
                            <conditions>
                                <condition id="-7" name="Compare instance variable" type="NPCs">
                                    <param id="0" name="Instance variable">ConversationID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;BusterLarry_Conversation01&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" type="Buster">
                                    <param id="0" name="Instance variable">Talking</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="0" name="Set text" type="SpeakerID">
                                            <param id="0" name="Text">&quot;Larry Séance&quot;</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">&quot;♪ ズボンをうんち。&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">busterCanQuitConversation</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block collapsed="1">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" type="NPCs">
                                    <param id="0" name="Instance variable">ConversationID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;BusterDraeven_Conversation01&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" type="Buster">
                                    <param id="0" name="Instance variable">Talking</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block>
                                    <conditions>
                                        <condition id="-14" name="Compare variable" type="System">
                                            <param id="0" name="Variable">dialogueStep</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="4" name="Set animation" type="Dialogue_Portrait">
                                            <param id="0" name="Animation">&quot;Draeven&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="0" name="Set text" type="SpeakerID">
                                            <param id="0" name="Text">&quot;???&quot;</param>
                                        </action>
                                        <action id="0" name="Set text" type="DialogueText">
                                            <param id="0" name="Text">&quot;Can&apos;t rain all the time... &quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" type="System">
                                            <param id="0" name="Variable">busterCanQuitConversation</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" type="Dialogue_OK">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Keep this dialogue quitting event outside of the individual conversation trees, then it will work globally for all conversations. ***ALWAYS KEEP THIS AS THE LAST EVENT***</comment>
                <event-block>
                    <conditions>
                        <condition id="-14" name="Compare variable" type="System">
                            <param id="0" name="Variable">busterCanQuitConversation</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" type="System" />
                    </conditions>
                    <actions>
                        <action id="-13" name="Set boolean" type="Buster">
                            <param id="0" name="Instance variable">Talking</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block>
            <conditions>
                <condition id="-9" name="Is visible" type="Dialogue_OK" />
                <condition id="-8" name="Is boolean instance variable set" type="Buster">
                    <param id="0" name="Instance variable">Talking</param>
                </condition>
                <condition id="-4" name="Trigger once while true" type="System" />
            </conditions>
            <actions>
                <action id="0" name="Play" type="Audio">
                    <param id="0" name="Audio file">dialogue_blip02</param>
                    <param id="2" name="Loop">0</param>
                    <param id="3" name="Volume">0</param>
                    <param id="1" name="Tag (optional)">&quot;SFX&quot;</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
